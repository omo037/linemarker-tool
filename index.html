<!DOCTYPE html> 
<html lang="ja">
<head>
<meta charset="UTF-8">

<!-- ãƒšãƒ¼ã‚¸ã®ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã‚¿ãƒ–ã«è¡¨ç¤ºã•ã‚Œã‚‹ï¼‰ -->
<title>Advanced Marker Generator</title>

<style>

/* ===== CSSå¤‰æ•°ã‚¨ãƒªã‚¢ =====
   å…¨ä½“ã§ä½¿ã†è‰²ã‚„ã‚µã‚¤ã‚ºã‚’ã¾ã¨ã‚ã¦ç®¡ç†ã™ã‚‹å ´æ‰€
   JSã‹ã‚‰ã“ã“ã‚’æ›¸ãæ›ãˆã‚‹ã“ã¨ã§ãƒ‡ã‚¶ã‚¤ãƒ³ãŒå¤‰ã‚ã‚‹
*/
:root {
  --marker-color: #fff176;           /* ãƒãƒ¼ã‚«ãƒ¼è‰² */
  --marker-border-color: #ff9800;    /* ãƒãƒ¼ã‚«ãƒ¼ã®ç¸è‰² */
  --marker-border-width: 2px;        /* ç¸ã®å¤ªã• */
  --text-color: #000000;             /* æ–‡å­—è‰² */
  --marker-height: 16px;             /* ãƒãƒ¼ã‚«ãƒ¼é«˜ã• */
  --marker-expand: 6px;              /* æ¨ªæ‹¡å¼µ */
  --marker-radius: 10px;             /* è§’ä¸¸ */
  --font-size: 28px;                 /* æ–‡å­—ã‚µã‚¤ã‚º */
  --marker-offset: 0px;              /* ä¸Šä¸‹ä½ç½®èª¿æ•´ */
}

/* ãƒšãƒ¼ã‚¸å…¨ä½“ã®åŸºæœ¬ãƒ‡ã‚¶ã‚¤ãƒ³ */
body {
  margin: 0;
  padding: 40px;
  font-family: "Segoe UI", sans-serif;
  background: #fafafa;
}

/* è¨­å®šã‚¨ãƒªã‚¢ã®ç®± */
.container {
  width: 320px;
  display: flex;
  flex-direction: column;
  gap: 18px;
}

/* å„è¨­å®šã®1è¡Œ */
.setting {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.setting label {
  font-size: 14px;
  margin-right: 20px;
}

/* ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›æ¬„ */
textarea {
  width: 100%;
  height: 80px;
  padding: 10px;
  font-size: 16px;
  border-radius: 12px;
  border: 1px solid #ddd;
  box-sizing: border-box;
  font-family: inherit;
}

input[type="text"] {
  width: 80px;
  padding: 6px 8px;
  border-radius: 10px;
  border: 1px solid #ddd;
  font-family: inherit;
}

input[type="number"] {
  width: 70px;
  padding: 6px 8px;
  border-radius: 10px;
  border: 1px solid #ddd;
  font-family: inherit;
}

select {
  width: 110px;
  padding: 6px 8px;
  border-radius: 10px;
  border: 1px solid #ddd;
  font-family: inherit;
}

/* ã‚«ãƒ©ãƒ¼ãƒ”ãƒƒã‚«ãƒ¼ã®è¦‹ãŸç›®èª¿æ•´ */
input[type="color"] {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;              
  height: 20px;              
  box-sizing: border-box;
  padding: 0;
  border-radius: 10px;
  border: 1px solid #ddd;
  cursor: pointer;
  background: none;
}

input[type="color"]::-webkit-color-swatch-wrapper {
  padding: 0;
}

input[type="color"]::-webkit-color-swatch {
  border: none;
  border-radius: 8px;
}

input[type="color"]::-moz-color-swatch {
  border: none;
  border-radius: 8px;
}

/* åŒºåˆ‡ã‚Šç·š */
.divider {
  height: 1px;
  background: #e5e5e5;
  margin: 8px 0;
}

/* ===== ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ–‡å­— ===== */
.preview {
  margin-top: 20px;
  margin-left: auto;
  margin-right: auto;
  position: relative;
  display: inline-block;
  font-size: var(--font-size);
  padding: 0 12px;
  line-height: 1.4;
  white-space: nowrap;
  width: fit-content;
  max-width: none;
  text-align: center;
  color: var(--text-color);
  font-family: inherit;
}

/* ãƒãƒ¼ã‚«ãƒ¼æœ¬ä½“ï¼ˆæ“¬ä¼¼è¦ç´ ã§ä½œã£ã¦ã„ã‚‹ï¼‰ */
.preview::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, calc(-50% + var(--marker-offset)));
  width: calc(100% + var(--marker-expand) * 2);
  height: var(--marker-height);
  background: var(--marker-color);
  border-radius: var(--marker-radius);
  border: var(--marker-border-width) solid var(--marker-border-color);
  z-index: -1;
}

/* æ–‡å­—ãŒç©ºãªã‚‰ãƒãƒ¼ã‚«ãƒ¼ã‚’éè¡¨ç¤º */
.preview:empty::after {
  display: none;
}

/* ===== URLè¡¨ç¤ºã‚¨ãƒªã‚¢ ===== */
.url-container {
  margin-top: 12px;
  display: flex;
  align-items: center;
  border: 1px solid #e0e0e0;
  border-radius: 12px;
  overflow: hidden;
  background: #ffffff;
}

/* URLãƒ†ã‚­ã‚¹ãƒˆæ¬„ */
.url-container input {
  flex: 1;
  border: none;
  padding: 10px;
  font-size: 12px;
  outline: none;
  background: transparent;
}

/* ã‚³ãƒ”ãƒ¼ç”¨ãƒœã‚¿ãƒ³ */
.url-container button {
  width: 42px;
  height: 42px;
  border: none;
  background: #000;
  color: #fff;
  cursor: pointer;
  font-size: 16px;
}

</style>
</head>

<body>

<div class="container">
  
<h2>Marker Tool</h2>
  
<!-- å…¥åŠ›æ–‡å­— -->
<textarea id="inputText" placeholder="ã“ã“ã«æ–‡å­—ã‚’å…¥åŠ›"></textarea>

<div class="setting">
  <label>Text color</label>
  <div>
    <input type="color" id="textColorPicker" value="#000000">
    <input type="text" id="textColorCode" value="#000000">
  </div>
</div>

<div class="setting">
  <label>Text size</label>
  <input type="number" id="fontSize" value="28">
</div>

<div class="setting">
  <label>Text weight</label>
  <select id="fontWeight">
    <option value="400">Regular</option>
    <option value="500">Medium</option>
    <option value="600">SemiBold</option>
    <option value="700">Bold</option>
    <option value="800">ExtraBold</option>
  </select>
</div>

<div class="divider"></div>

<div class="setting">
  <label>Marker Color</label>
  <div>
    <input type="color" id="markerColorPicker" value="#fff176">
    <input type="text" id="markerColorCode" value="#fff176">
  </div>
</div>

<div class="setting">
  <label>Marker Height</label>
  <input type="number" id="markerHeight" value="16">
</div>

<div class="setting">
  <label>Marker Width</label>
  <input type="number" id="markerExpand" value="6">
</div>

<div class="setting">
  <label>Marker Radius</label>
  <input type="number" id="markerRadius" value="10">
</div>

<div class="setting">
  <label>Marker Position</label>
  <input type="number" id="markerOffset" value="0">
</div>

<div class="setting">
  <label>Edge Color</label>
  <div>
    <input type="color" id="markerBorderPicker" value="#ff9800">
    <input type="text" id="markerBorderCode" value="#ff9800">
  </div>
</div>

<div class="setting">
  <label>Edge Height</label>
  <input type="number" id="markerBorderWidth" value="2">
</div>

<div id="preview" class="preview"></div>

<!-- URLè‡ªå‹•ç”Ÿæˆã‚¨ãƒªã‚¢ -->
<div class="url-container">
  <input type="text" id="generatedUrl" readonly>
  <button onclick="copyUrl()">ğŸ“‹</button>
</div>

</div>

<script>

/* ===== ãƒ¡ã‚¤ãƒ³æ›´æ–°é–¢æ•° =====
   ã™ã¹ã¦ã®å…¥åŠ›å¤‰æ›´æ™‚ã«å‘¼ã°ã‚Œã‚‹
*/
function generate() {

  /* ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ–‡å­—æ›´æ–° */
  preview.textContent = inputText.value;
  preview.style.fontWeight = fontWeight.value;

  /* CSSå¤‰æ•°ã‚’æ›¸ãæ›ãˆã¦è¦‹ãŸç›®ã‚’å¤‰æ›´ */
  document.documentElement.style.setProperty('--font-size', fontSize.value + "px");
  document.documentElement.style.setProperty('--marker-color', markerColorCode.value);
  document.documentElement.style.setProperty('--marker-border-color', markerBorderCode.value);
  document.documentElement.style.setProperty('--marker-border-width', markerBorderWidth.value + "px");
  document.documentElement.style.setProperty('--text-color', textColorCode.value);
  document.documentElement.style.setProperty('--marker-height', markerHeight.value + "px");
  document.documentElement.style.setProperty('--marker-expand', markerExpand.value + "px");
  document.documentElement.style.setProperty('--marker-radius', markerRadius.value + "px");
  document.documentElement.style.setProperty('--marker-offset', markerOffset.value + "px");

  /* URLã‚‚åŒæ™‚æ›´æ–° */
  updateUrl();
}

/* ===== URLç”Ÿæˆå‡¦ç† ===== */
function updateUrl() {

  /* ç¾åœ¨ã®çŠ¶æ…‹ã‚’ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ– */
  const params = new URLSearchParams({
    text: inputText.value,
    size: fontSize.value,
    weight: fontWeight.value,
    textColor: textColorCode.value,
    markerColor: markerColorCode.value,
    markerHeight: markerHeight.value,
    markerExpand: markerExpand.value,
    markerRadius: markerRadius.value,
    markerOffset: markerOffset.value,
    borderColor: markerBorderCode.value,
    borderWidth: markerBorderWidth.value
  });

  /* ç¾åœ¨ã®ãƒšãƒ¼ã‚¸URL + ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ */
  const url = location.origin + location.pathname + "?" + params.toString();

  /* URLã‚’æ›¸ãæ›ãˆï¼ˆãƒšãƒ¼ã‚¸ã¯ãƒªãƒ­ãƒ¼ãƒ‰ã—ãªã„ï¼‰ */
  history.replaceState(null, "", url);

  /* è¡¨ç¤ºæ¬„ã«åæ˜  */
  document.getElementById("generatedUrl").value = url;
}

/* ===== ã‚³ãƒ”ãƒ¼å‡¦ç† ===== */
function copyUrl() {
  navigator.clipboard.writeText(
    document.getElementById("generatedUrl").value
  );
}

function loadFromUrl() {
  const params = new URLSearchParams(window.location.search);
  if (!params.toString()) return;

  inputText.value = params.get("text") || "";
  fontSize.value = params.get("size") || 28;
  fontWeight.value = params.get("weight") || 400;
  textColorCode.value = params.get("textColor") || "#000000";
  markerColorCode.value = params.get("markerColor") || "#fff176";
  markerHeight.value = params.get("markerHeight") || 16;
  markerExpand.value = params.get("markerExpand") || 6;
  markerRadius.value = params.get("markerRadius") || 10;
  markerOffset.value = params.get("markerOffset") || 0;
  markerBorderCode.value = params.get("borderColor") || "#ff9800";
  markerBorderWidth.value = params.get("borderWidth") || 2;

  generate();
}

/* å…¥åŠ›ãŒå¤‰ã‚ã‚‹ãŸã³ã«generateå®Ÿè¡Œ */
document.querySelectorAll("input, select, textarea").forEach(el=>{
  el.addEventListener("input", generate);
});

[
 ["markerColorPicker","markerColorCode"],
 ["markerBorderPicker","markerBorderCode"],
 ["textColorPicker","textColorCode"]
].forEach(([p,c])=>{
  document.getElementById(p).addEventListener("input",()=>{
    document.getElementById(c).value=document.getElementById(p).value;
  });
  document.getElementById(c).addEventListener("input",()=>{
    document.getElementById(p).value=document.getElementById(c).value;
  });
});

/* åˆæœŸè¡¨ç¤ºæ™‚ã«ä¸€åº¦å®Ÿè¡Œ */
generate();
loadFromUrl();
</script>

</body>
</html>

